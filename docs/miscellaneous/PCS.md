# PCS (Polynomial Commitment Scheme)

## Group

A group is a set of elements on which an operation can be mathematically defined.

A group satisfies the following conditions:

- **Closure**: For any elements $a$, $b$ in the group, the operation $a*b$ must also be an element within the group.

    - Example: In the group of integers under addition, $a+b$ must also be an integer.

- **Associativity**: The order of operations does not affect the result.

    - Example: $(a + b) + c = a + (b + c)$

    - [associative](https://en.wikipedia.org/wiki/Associative_property): For $\forall a, b, c \in G$, $(a * b) * c = a * (b * c)$

- **Identity Element**: There exists an identity element $e$ such that for every element $a$, $e * a = a * e = a$

    - Example: In the integer addition group, the identity element is 0; in the multiplicative group, it is 1.

    - [identity element](https://en.wikipedia.org/wiki/Identity_element): $\exists$ element $e \in G$ s.t. $e * a = a$ and $a * e = a$ for $\forall a \in G$

- **Inverse Element**: For every element $a$, there exists an inverse element $a^{-1}$ such that $a * a^{-1} = e$

    - Example: In the addition group, the inverse of $a$ is $-a$; in the multiplicative group, it is $a^{-1}$.

    - [inverse element](https://en.wikipedia.org/wiki/Inverse_element): For each $a \in G$, $\exists  b \in G$ s.t. $a * b = e$ and $b * a = e$ where $e$ is the identity element


### Cyclic Group

A cyclic group is a group in which all elements can be generated by a single element.

- That is, the elements in the group have the form $k \cdot G$, where $k$ is an integer.


Example: $\mathbb Z_7^{*} = \{1,2,3,4,5,6\}$ (mod 7)

- $3^1\equiv3$, $3^2\equiv2$, $3^3\equiv6$, $3^4\equiv4$, $3^5\equiv5$, $3^6\equiv1$ $(\text{mod } 7)$

- Exponentiation of 3 can generate all elements, and this 3 is called the generator.

### Finite Field $\mathbb{F}_p$

- $\mathbb{F}_p$ is a field consisting of a finite number of elements with size $p$ (where $p$ is a prime number).

- All numbers exist within the range taken modulo $p$, and addition/multiplication are defined.


---

## Commitment Scheme

A commitment scheme is a cryptographic method where the original message is hidden while the commitment form is made public, and later the message can be revealed (opened) and proven.

**$commit(m,r) \rightarrow c$** $(m \in M, r \in R)$

**$verify(c,m,r) \rightarrow \{\text{accept},\text{reject}\}$**

### Properties of Commitment Scheme

- **Binding**
    - It is impossible to create two valid openings for a single commitment.
    - Integrity is guaranteed because the data cannot be tampered with.

- **Hiding**
    - The commitment reveals no information about the committed message.
    - It can fix the information without exposing it.

## Polynomial Commitment Scheme (PCS)

A Polynomial Commitment Scheme in cryptography is a protocol designed to allow one to commit to a specific polynomial without revealing its actual content (such as coefficients), while being able to prove that the polynomial evaluates correctly at any arbitrary point.

### PCS Procedure

1. Setup  
2. Commit  
3. Open/Evaluation  
4. Verification  

### Representative Types of PCS

- **KZG (Kate–Zaverucha–Goldberg Commitment)**

    - Pairing-based, uses a single group element
    - PlonK

- **IPA (Inner Product Argument)**

    - Based on discrete logarithm problem
    - Bulletproofs

- **FRI (Fast Reed–Solomon Interactive Oracle Proof of Proximity)**

    - Hash-based, proofs are relatively long
    - STARKs

### KZG Commitment Scheme

- Finite Field $\mathbb F_p$ (p: prime number)

- Two pairing‑friendly groups: $G_1, G_2$와 $e: G_1 \times G_2 \to G_T$

- Generators: $g_1 \in G_1$, $g_2 \in G_2$

- Polynomial degree $\le d$

#### 1. Setup($1^{\lambda}$) $\rightarrow gp$ (global parameter)

- Secret parameter: $\tau {\leftarrow} \mathbb F_p$

- Global parameter: $gp = \{g_1^{\tau^0}, g_1^{\tau^1}, \dots, g_1^{\tau^{d}}, g_2, g_2^{\tau} \}$

- Delete $\tau$

#### 2. $Commit(gp, f) \rightarrow Com_f$

- $f(x) = a_0 + a_1 x + \dots + a_d x^d = \sum_{i=0}^{d} a_i x^{i}$ ($f \in \mathbb F_p^{(\le d)}[X]$)

- $Com_f = g_1^{f(\tau)}$ $$= g_1^{a_0 + a_1\tau + \dots + a_d\tau^{d}} = (g_1)^{a_0}(g_1^{\tau})^{a_1} (g_1^{\tau^{2}})^{a_2} \dots (g_1^{\tau^{d}})^{a_d}$$

- It is possible to generate a commitment given the provided $gp$.

#### 3. $Eval(gp, f, u) \rightarrow v, \pi$

- Goal: prove $f(u)= v$

- $\widehat f(x) := f(x) - v = (x - u)q(x)$

- $q(x) = \frac{f(x) - v}{x - u}$

- $\pi = Com_q = g_1^{q(\tau)}$

#### 4. $Verify(gp, Com_f, u, v, \pi)$ $\rightarrow$ accept or reject

- Relation: $f(\tau) - v = (\tau - u)q(\tau)$

- Values held by the verifier: $(gp, Com_f, u, v, \pi = Com_q)$

    - Since the value $\tau$ is unknown, it is impossible to compute the exponentiation connected by multiplication in $g^{q(\tau)\tau}$.

    - Verification is done using the pairing function.

        - Pairing property: $e(P^x, Q^y) = e(P,Q)^{xy} = e(P^{xy}, Q) = e(P, Q^{xy}) = e(P^y, Q^x)$


- $$e\bigl(g_1^{f(\tau)-v}, g_2\bigr) = e\bigl(g_1^{q(\tau)}, g_2^{\tau-u}\bigr)$$

- $$e(g_1,g_2)^{f(\tau)-v} = e(g_1,g_2)^{q(\tau)(\tau - u)}$$
